/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/


/* eslint-enable */
const myLinkedList = () => {
  let size = 0; //     --> current number of elements contained
  let head = null; //  --> the pointer to the head of the linkedlist
  let tail = null; //  --> the pointer to the tail of the linkedlist

  // adds a new node to the end of the list
  const append = v => {
    // v for vendetta, I mean, for value.
    size++;
    if (size === 1) {
      // first element in the linkedList
      const newNode = node(v, null, null);
      head = newNode;
      tail = newNode;
    } else {
      // last element in the Linkedlist
      const prevNode = tail;
      const newNode = node(v, null, prevNode);
      prevNode.nextNode = newNode;
      tail = newNode;
    }
  };

  // adds a new node to the start of the list
  const prepend = v => {
    const newNode = node(v, head, null); // the node we're wona prepend

    if (head !== null) {
      const prevHead = head; // the head that now will bhe the second element.
      prevHead.prevNode = newNode;
    }
    head = newNode; // now the linkedlist head is the new node.
    size++;
    if (size === 1) {
      // first element in the linkedlist
      tail = newNode;
    }
  };

  // returns the size of the linkedlist.
  const getSize = () => {
    if (size === null || size === undefined) {
      return 0;
    }
    return size;
  };

  // NO DIRTY JOKES
  const getHead = () => {
    return head;
  };

  // NO DIRTY JOKES
  const getTail = () => {
    return tail;
  };

  // returns the node at the given index
  const at = index => {
    if (index > size) return null; // we don't have that many nodes
    if (index === 1) return head;
    if (index === size) return tail;
    let node = {};
    const middle = parseInt(size / 2);
    if (index <= middle) {
      node = head;
      // the search begins from the head
      for (let i = 2; i <= index; i++) {
        node = node.nextNode;
      }
    } else {
      // the search begins from the tail
      node = tail;
      for (let i = size - 1; i >= index; i--) {
        node = node.prevNode;
      }
    }
    return node;
  };

  // removes the last element from the list
  const pop = () => {
    if (tail !== null && tail !== undefined) {
      const prevLastNode = tail.prevNode;
      prevLastNode.nextNode = null;
      tail = prevLastNode;
      size--;
    }
  };

  // returns true if the value is in some node of the linkedlist, else returns false
  const contains = v => {
    let node = head;
    while (node !== null && node !== undefined) {
      if (node.value === v) {
        return true;
      }
      node = node.nextNode;
    }
    return false;
  };

  // returns the index of the node containing such value, else returns null
  const find = v => {
    let node = head;
    while (node !== null && node !== undefined) {
      if (node.value === v) {
        return node.getIndex();
      }
      node = node.nextNode;
    }
    return null;
  };

  // represent the LinkedList as an string like (value) -> (value) -> (value) -> null
  const toString = () => {
    if (size === 0) return 'null';
    let node = head;
    let cadena = ''; // cadena is String in spanish, can also be chain, you're welcome for the free info

    while (node !== null && node !== undefined) {
      cadena += '(' + String(node.value) + ')->';
      node = node.nextNode;
    }
    cadena += 'null';
    return cadena;
  };

  // shows each node value with their previous and next values.
  const stringAllNodes = () => {
    let currentNode = head;
    let cadena = '';
    while (currentNode !== null && currentNode !== undefined) {
      cadena += currentNode.toString() + '\n';
      currentNode = currentNode.nextNode;
    }
    return cadena;
  };

  // substitutes a node with the value in the index provided
  const substituteAt = (v, index) => {
    // v for value, ind for index
    const actualNode = at(index);
    const prevNode = actualNode.prevNode;
    const nextNode = actualNode.nextNode;
    const newNode = node(v, nextNode, prevNode);
    nextNode.prevNode = newNode;
    prevNode.nextNode = newNode;
    if (index === 1) {
      head = newNode;
    }
    if (index === size) {
      tail = newNode;
    }
  };

  // inserts a new node with the value in the index provided
  const insertAt = (v, index) => {
    // v for value, ind for index
    const actualNode = at(index);
    const prevNode = actualNode.prevNode;
    const newNode = node(v, actualNode, prevNode);
    actualNode.prevNode = newNode;
    prevNode.nextNode = newNode;
    size++;
    if (index === 1) {
      head = newNode;
    }
    if (index === size) {
      tail = newNode;
    }
  };

  // removes the node at the index provided
  const removeAt = index => {
    // v for value, ind for index
    const actualNode = at(index);
    const prevNode = actualNode.prevNode;
    const nextNode = actualNode.nextNode;
    nextNode.prevNode = prevNode;
    prevNode.nextNode = nextNode;
    size--;
    if (index === 1) {
      head = nextNode;
    }
    if (index === size) {
      tail = prevNode;
    }
  };

  // we empty the all linkedlist
  const empty = () => {
    head = null;
    tail = null;
    size = 0;
  };
  return {
    size,
    head,
    tail,
    append,
    prepend,
    getSize,
    getHead,
    getTail,
    at,
    pop,
    contains,
    find,
    toString,
    stringAllNodes,
    substituteAt,
    insertAt,
    removeAt,
    empty
  };
};

// my node object
const node = (value, nextNode, prevNode) => {
  // Calculates the index of the node by looping back until a null previous value is found. It wouldn't work in circled linkedLists
  function getIndex() {
    let localNode = this;
    let index = 1;
    while (localNode.prevNode !== null && localNode.prevNode !== undefined) {
      index++;
      localNode = localNode.prevNode;
    }
    return index;
  }
  function toString() {
    const valueNode = this.value != null ? this.value : 'null';
    const valueNext = this.nextNode != null ? this.nextNode.value : 'null';
    const valuePrev = this.prevNode != null ? this.prevNode.value : 'null';
    return `(${valueNode}) | nextNode (${valueNext}) | prevNode (${valuePrev})`;
  }
  return {
    value,
    nextNode,
    prevNode,
    getIndex,
    toString
  };
};
const list = myLinkedList('test');

// I still don't know how to use jest to test this functions, so I did it manually:
console.log('\nTesting append');
testAppend();
console.log('\nTesting prepend');
testPrepend();
console.log('\nTesting size');
testSize();
console.log('\nTesting getHead');
testHead();
console.log('\nTesting getTail');
testTail();
console.log('\nTesting at');
testAtIndex();
console.log('\nTesting pop');
testPop();
console.log('\nTesting contains');
testContains();
console.log('\nTesting find');
testFind();
console.log('\nTesting insertAt');
testInsertAt();
console.log('\nTesting removeAt');
testRemoveAt();

// we don't include testToString because it's been used in each of the tests before.

function testAppend() {
  list.empty();
  list.append('A');
  list.append('B');
  list.append('C');
  list.append('D');
  list.append('E');
  list.append('F');
  list.append('G');
  list.append('H');
  list.append('I');
  list.append('J');
  list.append('K');
  list.append('L');
  console.log(list.toString());
  console.log(list.stringAllNodes());
}
function testPrepend() {
  list.empty();
  list.prepend('A');
  list.prepend('B');
  list.prepend('C');
  list.prepend('D');
  list.prepend('E');
  list.prepend('F');
  list.prepend('G');
  list.prepend('H');
  list.prepend('I');
  list.prepend('J');
  list.prepend('K');
  list.prepend('L');
  console.log(list.toString());
  console.log(list.stringAllNodes());
}
function testSize() {
  list.empty();
  testAppend();
  console.log('Total size: ' + list.getSize());
}
function testHead() {
  list.empty();
  testAppend();
  console.log('The head is: ' + list.getHead());
}
function testTail() {
  list.empty();
  testAppend();
  console.log('The tail is: ' + list.getTail());
}
function testAtIndex() {
  list.empty();
  testAppend();
  console.log('Element at index 5 is: ' + list.at(5));
}
function testPop() {
  list.empty();
  testAppend();
  console.log('We pop and show again the list');
  list.pop();
  console.log(list.toString());
  console.log(list.stringAllNodes());
}
function testContains() {
  list.empty();
  testAppend();
  console.log('do we contain a C? ' + list.contains('C'));
  console.log('do we contain a @? ' + list.contains('@'));
}
function testFind() {
  list.empty();
  testAppend();
  console.log('At what index is C? ' + list.find('C'));
  console.log('At what index is @? ' + list.find('@'));
}
function testInsertAt() {
  list.empty();
  testAppend();
  console.log('----inserting @ at 5 index----');
  list.insertAt('@', 5);
  console.log(list.toString());
  console.log(list.stringAllNodes());
}
function testRemoveAt() {
  list.empty();
  testAppend();
  console.log('removing 10 index --> ' + list.at(10));
  list.removeAt(10);
  console.log(list.toString());
  console.log(list.stringAllNodes());
}
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDWCxjQUFjLEVBQUUsQ0FBQztBQUNwQztBQUVBLFNBQVN3QixZQUFZLEdBQUc7RUFDdEJiLElBQUksQ0FBQ0wsS0FBSyxFQUFFO0VBQ1pRLFVBQVUsRUFBRTtFQUNaRixPQUFPLENBQUNDLEdBQUcsQ0FBQyx3QkFBd0IsR0FBR0YsSUFBSSxDQUFDekIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ25EeUIsSUFBSSxDQUFDTixRQUFRLENBQUMsRUFBRSxDQUFDO0VBQ2pCTyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDZCxRQUFRLEVBQUUsQ0FBQztFQUM1QmUsT0FBTyxDQUFDQyxHQUFHLENBQUNGLElBQUksQ0FBQ1gsY0FBYyxFQUFFLENBQUM7QUFDcEMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tbGlua2VkLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5jb25zdCBteUxpbmtlZExpc3QgPSAoKSA9PiB7XG4gIGxldCBzaXplID0gMDsgLy8gICAgIC0tPiBjdXJyZW50IG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWRcbiAgbGV0IGhlYWQgPSBudWxsOyAvLyAgLS0+IHRoZSBwb2ludGVyIHRvIHRoZSBoZWFkIG9mIHRoZSBsaW5rZWRsaXN0XG4gIGxldCB0YWlsID0gbnVsbDsgLy8gIC0tPiB0aGUgcG9pbnRlciB0byB0aGUgdGFpbCBvZiB0aGUgbGlua2VkbGlzdFxuXG4gIC8vIGFkZHMgYSBuZXcgbm9kZSB0byB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gIGNvbnN0IGFwcGVuZCA9ICh2KSA9PiB7XG4gICAgLy8gdiBmb3IgdmVuZGV0dGEsIEkgbWVhbiwgZm9yIHZhbHVlLlxuICAgIHNpemUrKztcbiAgICBpZiAoc2l6ZSA9PT0gMSkge1xuICAgICAgLy8gZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlua2VkTGlzdFxuICAgICAgY29uc3QgbmV3Tm9kZSA9IG5vZGUodiwgbnVsbCwgbnVsbCk7XG4gICAgICBoZWFkID0gbmV3Tm9kZTtcbiAgICAgIHRhaWwgPSBuZXdOb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBsYXN0IGVsZW1lbnQgaW4gdGhlIExpbmtlZGxpc3RcbiAgICAgIGNvbnN0IHByZXZOb2RlID0gdGFpbDtcbiAgICAgIGNvbnN0IG5ld05vZGUgPSBub2RlKHYsIG51bGwsIHByZXZOb2RlKTtcbiAgICAgIHByZXZOb2RlLm5leHROb2RlID0gbmV3Tm9kZTtcbiAgICAgIHRhaWwgPSBuZXdOb2RlO1xuICAgIH1cbiAgfTtcblxuICAvLyBhZGRzIGEgbmV3IG5vZGUgdG8gdGhlIHN0YXJ0IG9mIHRoZSBsaXN0XG4gIGNvbnN0IHByZXBlbmQgPSAodikgPT4ge1xuICAgIGNvbnN0IG5ld05vZGUgPSBub2RlKHYsIGhlYWQsIG51bGwpOyAvLyB0aGUgbm9kZSB3ZSdyZSB3b25hIHByZXBlbmRcblxuICAgIGlmIChoZWFkICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBwcmV2SGVhZCA9IGhlYWQ7IC8vIHRoZSBoZWFkIHRoYXQgbm93IHdpbGwgYmhlIHRoZSBzZWNvbmQgZWxlbWVudC5cbiAgICAgIHByZXZIZWFkLnByZXZOb2RlID0gbmV3Tm9kZTtcbiAgICB9XG5cbiAgICBoZWFkID0gbmV3Tm9kZTsgLy8gbm93IHRoZSBsaW5rZWRsaXN0IGhlYWQgaXMgdGhlIG5ldyBub2RlLlxuICAgIHNpemUrKztcbiAgICBpZiAoc2l6ZSA9PT0gMSkge1xuICAgICAgLy8gZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlua2VkbGlzdFxuICAgICAgdGFpbCA9IG5ld05vZGU7XG4gICAgfVxuICB9O1xuXG4gIC8vIHJldHVybnMgdGhlIHNpemUgb2YgdGhlIGxpbmtlZGxpc3QuXG4gIGNvbnN0IGdldFNpemUgPSAoKSA9PiB7XG4gICAgaWYgKHNpemUgPT09IG51bGwgfHwgc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gc2l6ZTtcbiAgfTtcblxuICAvLyBOTyBESVJUWSBKT0tFU1xuICBjb25zdCBnZXRIZWFkID0gKCkgPT4ge1xuICAgIHJldHVybiBoZWFkO1xuICB9O1xuXG4gIC8vIE5PIERJUlRZIEpPS0VTXG4gIGNvbnN0IGdldFRhaWwgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRhaWw7XG4gIH07XG5cbiAgLy8gcmV0dXJucyB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXhcbiAgY29uc3QgYXQgPSAoaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggPiBzaXplKSByZXR1cm4gbnVsbDsgLy8gd2UgZG9uJ3QgaGF2ZSB0aGF0IG1hbnkgbm9kZXNcbiAgICBpZiAoaW5kZXggPT09IDEpIHJldHVybiBoZWFkO1xuICAgIGlmIChpbmRleCA9PT0gc2l6ZSkgcmV0dXJuIHRhaWw7XG5cbiAgICBsZXQgbm9kZSA9IHt9O1xuICAgIGNvbnN0IG1pZGRsZSA9IHBhcnNlSW50KHNpemUgLyAyKTtcblxuICAgIGlmIChpbmRleCA8PSBtaWRkbGUpIHtcbiAgICAgIG5vZGUgPSBoZWFkO1xuICAgICAgLy8gdGhlIHNlYXJjaCBiZWdpbnMgZnJvbSB0aGUgaGVhZFxuICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPD0gaW5kZXg7IGkrKykge1xuICAgICAgICBub2RlID0gbm9kZS5uZXh0Tm9kZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGhlIHNlYXJjaCBiZWdpbnMgZnJvbSB0aGUgdGFpbFxuICAgICAgbm9kZSA9IHRhaWw7XG4gICAgICBmb3IgKGxldCBpID0gc2l6ZSAtIDE7IGkgPj0gaW5kZXg7IGktLSkge1xuICAgICAgICBub2RlID0gbm9kZS5wcmV2Tm9kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgLy8gcmVtb3ZlcyB0aGUgbGFzdCBlbGVtZW50IGZyb20gdGhlIGxpc3RcbiAgY29uc3QgcG9wID0gKCkgPT4ge1xuICAgIGlmICh0YWlsICE9PSBudWxsICYmIHRhaWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgcHJldkxhc3ROb2RlID0gdGFpbC5wcmV2Tm9kZTtcbiAgICAgIHByZXZMYXN0Tm9kZS5uZXh0Tm9kZSA9IG51bGw7XG4gICAgICB0YWlsID0gcHJldkxhc3ROb2RlO1xuICAgICAgc2l6ZS0tO1xuICAgIH1cbiAgfTtcblxuICAvLyByZXR1cm5zIHRydWUgaWYgdGhlIHZhbHVlIGlzIGluIHNvbWUgbm9kZSBvZiB0aGUgbGlua2VkbGlzdCwgZWxzZSByZXR1cm5zIGZhbHNlXG4gIGNvbnN0IGNvbnRhaW5zID0gKHYpID0+IHtcbiAgICBsZXQgbm9kZSA9IGhlYWQ7XG5cbiAgICB3aGlsZSAobm9kZSAhPT0gbnVsbCAmJiBub2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChub2RlLnZhbHVlID09PSB2KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbm9kZSA9IG5vZGUubmV4dE5vZGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8vIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBub2RlIGNvbnRhaW5pbmcgc3VjaCB2YWx1ZSwgZWxzZSByZXR1cm5zIG51bGxcbiAgY29uc3QgZmluZCA9ICh2KSA9PiB7XG4gICAgbGV0IG5vZGUgPSBoZWFkO1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwgJiYgbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAobm9kZS52YWx1ZSA9PT0gdikge1xuICAgICAgICByZXR1cm4gbm9kZS5nZXRJbmRleCgpO1xuICAgICAgfVxuICAgICAgbm9kZSA9IG5vZGUubmV4dE5vZGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gcmVwcmVzZW50IHRoZSBMaW5rZWRMaXN0IGFzIGFuIHN0cmluZyBsaWtlICh2YWx1ZSkgLT4gKHZhbHVlKSAtPiAodmFsdWUpIC0+IG51bGxcbiAgY29uc3QgdG9TdHJpbmcgPSAoKSA9PiB7XG4gICAgaWYgKHNpemUgPT09IDApIHJldHVybiAnbnVsbCc7XG5cbiAgICBsZXQgbm9kZSA9IGhlYWQ7XG4gICAgbGV0IGNhZGVuYSA9ICcnOyAvLyBjYWRlbmEgaXMgU3RyaW5nIGluIHNwYW5pc2gsIGNhbiBhbHNvIGJlIGNoYWluLCB5b3UncmUgd2VsY29tZSBmb3IgdGhlIGZyZWUgaW5mb1xuXG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwgJiYgbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjYWRlbmEgKz0gJygnICsgU3RyaW5nKG5vZGUudmFsdWUpICsgJyktPic7XG4gICAgICBub2RlID0gbm9kZS5uZXh0Tm9kZTtcbiAgICB9XG4gICAgY2FkZW5hICs9ICdudWxsJztcblxuICAgIHJldHVybiBjYWRlbmE7XG4gIH07XG5cbiAgLy8gc2hvd3MgZWFjaCBub2RlIHZhbHVlIHdpdGggdGhlaXIgcHJldmlvdXMgYW5kIG5leHQgdmFsdWVzLlxuICBjb25zdCBzdHJpbmdBbGxOb2RlcyA9ICgpID0+IHtcbiAgICBsZXQgY3VycmVudE5vZGUgPSBoZWFkO1xuICAgIGxldCBjYWRlbmEgPSAnJztcblxuICAgIHdoaWxlIChjdXJyZW50Tm9kZSAhPT0gbnVsbCAmJiBjdXJyZW50Tm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjYWRlbmEgKz0gY3VycmVudE5vZGUudG9TdHJpbmcoKSArICdcXG4nO1xuICAgICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGNhZGVuYTtcbiAgfTtcblxuICAvLyBzdWJzdGl0dXRlcyBhIG5vZGUgd2l0aCB0aGUgdmFsdWUgaW4gdGhlIGluZGV4IHByb3ZpZGVkXG4gIGNvbnN0IHN1YnN0aXR1dGVBdCA9ICh2LCBpbmRleCkgPT4ge1xuICAgIC8vIHYgZm9yIHZhbHVlLCBpbmQgZm9yIGluZGV4XG4gICAgY29uc3QgYWN0dWFsTm9kZSA9IGF0KGluZGV4KTtcbiAgICBjb25zdCBwcmV2Tm9kZSA9IGFjdHVhbE5vZGUucHJldk5vZGU7XG4gICAgY29uc3QgbmV4dE5vZGUgPSBhY3R1YWxOb2RlLm5leHROb2RlO1xuICAgIGNvbnN0IG5ld05vZGUgPSBub2RlKHYsIG5leHROb2RlLCBwcmV2Tm9kZSk7XG4gICAgbmV4dE5vZGUucHJldk5vZGUgPSBuZXdOb2RlO1xuICAgIHByZXZOb2RlLm5leHROb2RlID0gbmV3Tm9kZTtcbiAgICBpZiAoaW5kZXggPT09IDEpIHtcbiAgICAgIGhlYWQgPSBuZXdOb2RlO1xuICAgIH1cbiAgICBpZiAoaW5kZXggPT09IHNpemUpIHtcbiAgICAgIHRhaWwgPSBuZXdOb2RlO1xuICAgIH1cbiAgfTtcblxuICAvLyBpbnNlcnRzIGEgbmV3IG5vZGUgd2l0aCB0aGUgdmFsdWUgaW4gdGhlIGluZGV4IHByb3ZpZGVkXG4gIGNvbnN0IGluc2VydEF0ID0gKHYsIGluZGV4KSA9PiB7XG4gICAgLy8gdiBmb3IgdmFsdWUsIGluZCBmb3IgaW5kZXhcbiAgICBjb25zdCBhY3R1YWxOb2RlID0gYXQoaW5kZXgpO1xuICAgIGNvbnN0IHByZXZOb2RlID0gYWN0dWFsTm9kZS5wcmV2Tm9kZTtcbiAgICBjb25zdCBuZXdOb2RlID0gbm9kZSh2LCBhY3R1YWxOb2RlLCBwcmV2Tm9kZSk7XG4gICAgYWN0dWFsTm9kZS5wcmV2Tm9kZSA9IG5ld05vZGU7XG4gICAgcHJldk5vZGUubmV4dE5vZGUgPSBuZXdOb2RlO1xuICAgIHNpemUrKztcbiAgICBpZiAoaW5kZXggPT09IDEpIHtcbiAgICAgIGhlYWQgPSBuZXdOb2RlO1xuICAgIH1cbiAgICBpZiAoaW5kZXggPT09IHNpemUpIHtcbiAgICAgIHRhaWwgPSBuZXdOb2RlO1xuICAgIH1cbiAgfTtcblxuICAvLyByZW1vdmVzIHRoZSBub2RlIGF0IHRoZSBpbmRleCBwcm92aWRlZFxuICBjb25zdCByZW1vdmVBdCA9IChpbmRleCkgPT4ge1xuICAgIC8vIHYgZm9yIHZhbHVlLCBpbmQgZm9yIGluZGV4XG4gICAgY29uc3QgYWN0dWFsTm9kZSA9IGF0KGluZGV4KTtcbiAgICBjb25zdCBwcmV2Tm9kZSA9IGFjdHVhbE5vZGUucHJldk5vZGU7XG4gICAgY29uc3QgbmV4dE5vZGUgPSBhY3R1YWxOb2RlLm5leHROb2RlO1xuICAgIG5leHROb2RlLnByZXZOb2RlID0gcHJldk5vZGU7XG4gICAgcHJldk5vZGUubmV4dE5vZGUgPSBuZXh0Tm9kZTtcbiAgICBzaXplLS07XG4gICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICBoZWFkID0gbmV4dE5vZGU7XG4gICAgfVxuICAgIGlmIChpbmRleCA9PT0gc2l6ZSkge1xuICAgICAgdGFpbCA9IHByZXZOb2RlO1xuICAgIH1cbiAgfTtcblxuICAvLyB3ZSBlbXB0eSB0aGUgYWxsIGxpbmtlZGxpc3RcbiAgY29uc3QgZW1wdHkgPSAoKSA9PiB7XG4gICAgaGVhZCA9IG51bGw7XG4gICAgdGFpbCA9IG51bGw7XG4gICAgc2l6ZSA9IDA7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzaXplLFxuICAgIGhlYWQsXG4gICAgdGFpbCxcbiAgICBhcHBlbmQsXG4gICAgcHJlcGVuZCxcbiAgICBnZXRTaXplLFxuICAgIGdldEhlYWQsXG4gICAgZ2V0VGFpbCxcbiAgICBhdCxcbiAgICBwb3AsXG4gICAgY29udGFpbnMsXG4gICAgZmluZCxcbiAgICB0b1N0cmluZyxcbiAgICBzdHJpbmdBbGxOb2RlcyxcbiAgICBzdWJzdGl0dXRlQXQsXG4gICAgaW5zZXJ0QXQsXG4gICAgcmVtb3ZlQXQsXG4gICAgZW1wdHksXG4gIH07XG59O1xuXG4vLyBteSBub2RlIG9iamVjdFxuY29uc3Qgbm9kZSA9ICh2YWx1ZSwgbmV4dE5vZGUsIHByZXZOb2RlKSA9PiB7XG4gIC8vIENhbGN1bGF0ZXMgdGhlIGluZGV4IG9mIHRoZSBub2RlIGJ5IGxvb3BpbmcgYmFjayB1bnRpbCBhIG51bGwgcHJldmlvdXMgdmFsdWUgaXMgZm91bmQuIEl0IHdvdWxkbid0IHdvcmsgaW4gY2lyY2xlZCBsaW5rZWRMaXN0c1xuICBmdW5jdGlvbiBnZXRJbmRleCgpIHtcbiAgICBsZXQgbG9jYWxOb2RlID0gdGhpcztcbiAgICBsZXQgaW5kZXggPSAxO1xuXG4gICAgd2hpbGUgKGxvY2FsTm9kZS5wcmV2Tm9kZSAhPT0gbnVsbCAmJiBsb2NhbE5vZGUucHJldk5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaW5kZXgrKztcbiAgICAgIGxvY2FsTm9kZSA9IGxvY2FsTm9kZS5wcmV2Tm9kZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICBjb25zdCB2YWx1ZU5vZGUgPSB0aGlzLnZhbHVlICE9IG51bGwgPyB0aGlzLnZhbHVlIDogJ251bGwnO1xuICAgIGNvbnN0IHZhbHVlTmV4dCA9IHRoaXMubmV4dE5vZGUgIT0gbnVsbCA/IHRoaXMubmV4dE5vZGUudmFsdWUgOiAnbnVsbCc7XG4gICAgY29uc3QgdmFsdWVQcmV2ID0gdGhpcy5wcmV2Tm9kZSAhPSBudWxsID8gdGhpcy5wcmV2Tm9kZS52YWx1ZSA6ICdudWxsJztcblxuICAgIHJldHVybiBgKCR7dmFsdWVOb2RlfSkgfCBuZXh0Tm9kZSAoJHt2YWx1ZU5leHR9KSB8IHByZXZOb2RlICgke3ZhbHVlUHJldn0pYDtcbiAgfVxuXG4gIHJldHVybiB7IHZhbHVlLCBuZXh0Tm9kZSwgcHJldk5vZGUsIGdldEluZGV4LCB0b1N0cmluZyB9O1xufTtcblxuY29uc3QgbGlzdCA9IG15TGlua2VkTGlzdCgndGVzdCcpO1xuXG4vLyBJIHN0aWxsIGRvbid0IGtub3cgaG93IHRvIHVzZSBqZXN0IHRvIHRlc3QgdGhpcyBmdW5jdGlvbnMsIHNvIEkgZGlkIGl0IG1hbnVhbGx5OlxuY29uc29sZS5sb2coJ1xcblRlc3RpbmcgYXBwZW5kJyk7XG50ZXN0QXBwZW5kKCk7XG5cbmNvbnNvbGUubG9nKCdcXG5UZXN0aW5nIHByZXBlbmQnKTtcbnRlc3RQcmVwZW5kKCk7XG5cbmNvbnNvbGUubG9nKCdcXG5UZXN0aW5nIHNpemUnKTtcbnRlc3RTaXplKCk7XG5cbmNvbnNvbGUubG9nKCdcXG5UZXN0aW5nIGdldEhlYWQnKTtcbnRlc3RIZWFkKCk7XG5cbmNvbnNvbGUubG9nKCdcXG5UZXN0aW5nIGdldFRhaWwnKTtcbnRlc3RUYWlsKCk7XG5cbmNvbnNvbGUubG9nKCdcXG5UZXN0aW5nIGF0Jyk7XG50ZXN0QXRJbmRleCgpO1xuXG5jb25zb2xlLmxvZygnXFxuVGVzdGluZyBwb3AnKTtcbnRlc3RQb3AoKTtcblxuY29uc29sZS5sb2coJ1xcblRlc3RpbmcgY29udGFpbnMnKTtcbnRlc3RDb250YWlucygpO1xuXG5jb25zb2xlLmxvZygnXFxuVGVzdGluZyBmaW5kJyk7XG50ZXN0RmluZCgpO1xuXG5jb25zb2xlLmxvZygnXFxuVGVzdGluZyBpbnNlcnRBdCcpO1xudGVzdEluc2VydEF0KCk7XG5cbmNvbnNvbGUubG9nKCdcXG5UZXN0aW5nIHJlbW92ZUF0Jyk7XG50ZXN0UmVtb3ZlQXQoKTtcblxuLy8gd2UgZG9uJ3QgaW5jbHVkZSB0ZXN0VG9TdHJpbmcgYmVjYXVzZSBpdCdzIGJlZW4gdXNlZCBpbiBlYWNoIG9mIHRoZSB0ZXN0cyBiZWZvcmUuXG5cbmZ1bmN0aW9uIHRlc3RBcHBlbmQoKSB7XG4gIGxpc3QuZW1wdHkoKTtcbiAgbGlzdC5hcHBlbmQoJ0EnKTtcbiAgbGlzdC5hcHBlbmQoJ0InKTtcbiAgbGlzdC5hcHBlbmQoJ0MnKTtcbiAgbGlzdC5hcHBlbmQoJ0QnKTtcbiAgbGlzdC5hcHBlbmQoJ0UnKTtcbiAgbGlzdC5hcHBlbmQoJ0YnKTtcbiAgbGlzdC5hcHBlbmQoJ0cnKTtcbiAgbGlzdC5hcHBlbmQoJ0gnKTtcbiAgbGlzdC5hcHBlbmQoJ0knKTtcbiAgbGlzdC5hcHBlbmQoJ0onKTtcbiAgbGlzdC5hcHBlbmQoJ0snKTtcbiAgbGlzdC5hcHBlbmQoJ0wnKTtcbiAgY29uc29sZS5sb2cobGlzdC50b1N0cmluZygpKTtcbiAgY29uc29sZS5sb2cobGlzdC5zdHJpbmdBbGxOb2RlcygpKTtcbn1cblxuZnVuY3Rpb24gdGVzdFByZXBlbmQoKSB7XG4gIGxpc3QuZW1wdHkoKTtcbiAgbGlzdC5wcmVwZW5kKCdBJyk7XG4gIGxpc3QucHJlcGVuZCgnQicpO1xuICBsaXN0LnByZXBlbmQoJ0MnKTtcbiAgbGlzdC5wcmVwZW5kKCdEJyk7XG4gIGxpc3QucHJlcGVuZCgnRScpO1xuICBsaXN0LnByZXBlbmQoJ0YnKTtcbiAgbGlzdC5wcmVwZW5kKCdHJyk7XG4gIGxpc3QucHJlcGVuZCgnSCcpO1xuICBsaXN0LnByZXBlbmQoJ0knKTtcbiAgbGlzdC5wcmVwZW5kKCdKJyk7XG4gIGxpc3QucHJlcGVuZCgnSycpO1xuICBsaXN0LnByZXBlbmQoJ0wnKTtcbiAgY29uc29sZS5sb2cobGlzdC50b1N0cmluZygpKTtcbiAgY29uc29sZS5sb2cobGlzdC5zdHJpbmdBbGxOb2RlcygpKTtcbn1cblxuZnVuY3Rpb24gdGVzdFNpemUoKSB7XG4gIGxpc3QuZW1wdHkoKTtcbiAgdGVzdEFwcGVuZCgpO1xuICBjb25zb2xlLmxvZygnVG90YWwgc2l6ZTogJyArIGxpc3QuZ2V0U2l6ZSgpKTtcbn1cblxuZnVuY3Rpb24gdGVzdEhlYWQoKSB7XG4gIGxpc3QuZW1wdHkoKTtcbiAgdGVzdEFwcGVuZCgpO1xuICBjb25zb2xlLmxvZygnVGhlIGhlYWQgaXM6ICcgKyBsaXN0LmdldEhlYWQoKSk7XG59XG5cbmZ1bmN0aW9uIHRlc3RUYWlsKCkge1xuICBsaXN0LmVtcHR5KCk7XG4gIHRlc3RBcHBlbmQoKTtcbiAgY29uc29sZS5sb2coJ1RoZSB0YWlsIGlzOiAnICsgbGlzdC5nZXRUYWlsKCkpO1xufVxuXG5mdW5jdGlvbiB0ZXN0QXRJbmRleCgpIHtcbiAgbGlzdC5lbXB0eSgpO1xuICB0ZXN0QXBwZW5kKCk7XG4gIGNvbnNvbGUubG9nKCdFbGVtZW50IGF0IGluZGV4IDUgaXM6ICcgKyBsaXN0LmF0KDUpKTtcbn1cblxuZnVuY3Rpb24gdGVzdFBvcCgpIHtcbiAgbGlzdC5lbXB0eSgpO1xuICB0ZXN0QXBwZW5kKCk7XG4gIGNvbnNvbGUubG9nKCdXZSBwb3AgYW5kIHNob3cgYWdhaW4gdGhlIGxpc3QnKTtcbiAgbGlzdC5wb3AoKTtcbiAgY29uc29sZS5sb2cobGlzdC50b1N0cmluZygpKTtcbiAgY29uc29sZS5sb2cobGlzdC5zdHJpbmdBbGxOb2RlcygpKTtcbn1cblxuZnVuY3Rpb24gdGVzdENvbnRhaW5zKCkge1xuICBsaXN0LmVtcHR5KCk7XG4gIHRlc3RBcHBlbmQoKTtcbiAgY29uc29sZS5sb2coJ2RvIHdlIGNvbnRhaW4gYSBDPyAnICsgbGlzdC5jb250YWlucygnQycpKTtcbiAgY29uc29sZS5sb2coJ2RvIHdlIGNvbnRhaW4gYSBAPyAnICsgbGlzdC5jb250YWlucygnQCcpKTtcbn1cblxuZnVuY3Rpb24gdGVzdEZpbmQoKSB7XG4gIGxpc3QuZW1wdHkoKTtcbiAgdGVzdEFwcGVuZCgpO1xuICBjb25zb2xlLmxvZygnQXQgd2hhdCBpbmRleCBpcyBDPyAnICsgbGlzdC5maW5kKCdDJykpO1xuICBjb25zb2xlLmxvZygnQXQgd2hhdCBpbmRleCBpcyBAPyAnICsgbGlzdC5maW5kKCdAJykpO1xufVxuXG5mdW5jdGlvbiB0ZXN0SW5zZXJ0QXQoKSB7XG4gIGxpc3QuZW1wdHkoKTtcbiAgdGVzdEFwcGVuZCgpO1xuICBjb25zb2xlLmxvZygnLS0tLWluc2VydGluZyBAIGF0IDUgaW5kZXgtLS0tJyk7XG4gIGxpc3QuaW5zZXJ0QXQoJ0AnLCA1KTtcbiAgY29uc29sZS5sb2cobGlzdC50b1N0cmluZygpKTtcbiAgY29uc29sZS5sb2cobGlzdC5zdHJpbmdBbGxOb2RlcygpKTtcbn1cblxuZnVuY3Rpb24gdGVzdFJlbW92ZUF0KCkge1xuICBsaXN0LmVtcHR5KCk7XG4gIHRlc3RBcHBlbmQoKTtcbiAgY29uc29sZS5sb2coJ3JlbW92aW5nIDEwIGluZGV4IC0tPiAnICsgbGlzdC5hdCgxMCkpO1xuICBsaXN0LnJlbW92ZUF0KDEwKTtcbiAgY29uc29sZS5sb2cobGlzdC50b1N0cmluZygpKTtcbiAgY29uc29sZS5sb2cobGlzdC5zdHJpbmdBbGxOb2RlcygpKTtcbn1cbiJdLCJuYW1lcyI6WyJteUxpbmtlZExpc3QiLCJzaXplIiwiaGVhZCIsInRhaWwiLCJhcHBlbmQiLCJ2IiwibmV3Tm9kZSIsIm5vZGUiLCJwcmV2Tm9kZSIsIm5leHROb2RlIiwicHJlcGVuZCIsInByZXZIZWFkIiwiZ2V0U2l6ZSIsInVuZGVmaW5lZCIsImdldEhlYWQiLCJnZXRUYWlsIiwiYXQiLCJpbmRleCIsIm1pZGRsZSIsInBhcnNlSW50IiwiaSIsInBvcCIsInByZXZMYXN0Tm9kZSIsImNvbnRhaW5zIiwidmFsdWUiLCJmaW5kIiwiZ2V0SW5kZXgiLCJ0b1N0cmluZyIsImNhZGVuYSIsIlN0cmluZyIsInN0cmluZ0FsbE5vZGVzIiwiY3VycmVudE5vZGUiLCJzdWJzdGl0dXRlQXQiLCJhY3R1YWxOb2RlIiwiaW5zZXJ0QXQiLCJyZW1vdmVBdCIsImVtcHR5IiwibG9jYWxOb2RlIiwidmFsdWVOb2RlIiwidmFsdWVOZXh0IiwidmFsdWVQcmV2IiwibGlzdCIsImNvbnNvbGUiLCJsb2ciLCJ0ZXN0QXBwZW5kIiwidGVzdFByZXBlbmQiLCJ0ZXN0U2l6ZSIsInRlc3RIZWFkIiwidGVzdFRhaWwiLCJ0ZXN0QXRJbmRleCIsInRlc3RQb3AiLCJ0ZXN0Q29udGFpbnMiLCJ0ZXN0RmluZCIsInRlc3RJbnNlcnRBdCIsInRlc3RSZW1vdmVBdCJdLCJzb3VyY2VSb290IjoiIn0=